---------- NOT NECESSARILY USEFUL -----------
-- Query DrugCentral for CYP Ki data (sub Kd/Km as needed)
SELECT target_name, avg(act_value)
FROM act_table_full
WHERE struct_id in ()
and target_class = 'Enzyme' and target_name LIKE 'Cytochrome P450%' and act_type = 'Ki'
GROUP BY target_name
ORDER BY target_name
;

-- Query DrugCentral for transporter Ki data (sub Kd/Km as needed)
SELECT gene, avg(act_value)
FROM act_table_full
WHERE struct_id in ()
and target_class = 'Transporter' and act_type = 'Ki'
GROUP BY gene
ORDER BY gene
;

-- Query DrugCentral for overall Ki data (sub Kd/Km as needed)
SELECT avg(act_value)
FROM act_table_full
WHERE struct_id in ()
and act_type = 'Ki'
;

-- Query LAERTES to get HoIs grouped by meddra class... multiple queries here to do this
SELECT concept_id
FROM concept
WHERE concept_name in ('Alprazolam','aripiprazole','Asenapine','atorvastatin','Bupropion','Chlorpromazine','Citalopram', 'Clozapine',
'Desipramine','Desvenlafaxine','duloxetine','Escitalopram','Eszopiclone','Fluoxetine','Fluphenazine','fluvastatin','Fluvoxamine',
'Haloperidol','iloperidone','Lovastatin','lurasidone','Midazolam','Mirtazapine','nefazodone','olanzapine','paliperidone','Paroxetine',
'Perphenazine','Pimozide','pitavastatin','Pravastatin','quetiapine','Risperidone','rosuvastatin','Sertraline','Simvastatin','Thioridazine',
'Thiothixene','Trazodone','Triazolam','venlafaxine','zaleplon','ziprasidone','zolpidem')
and concept_class_id = 'Ingredient' and standard_concept = 'S'
ORDER BY concept_id
;

SELECT concept_name
FROM concept
WHERE concept_id in (700299, 700465, 703244, 703547, 704599, 708298, 712615, 714684, 715259, 715939, 716968, 717607,
720727, 722031, 725131, 733008, 735979, 739138, 743670, 744740, 745790, 750982, 751412, 755695,
756018, 757352, 757688, 766529, 766814, 781039, 785788, 794852, 797617, 800878, 1510813, 1539403,
1545958, 1549686, 1551860, 1592085, 19017241, 40164052, 40165636, 40230761)
ORDER BY concept_name
;

SELECT concept_name, count(*)
FROM concept_ancestor as CA 
JOIN (SELECT * FROM concept WHERE vocabulary_id = 'MedDRA' and concept_class_id = 'SOC') as TP on CA.ancestor_concept_id = TP.concept_id
JOIN (SELECT hoi FROM drug_hoi_relationship WHERE drug in (SELECT ingredient_id FROM laertes_summary WHERE report_order = 1 AND
ingredient in (SELECT concept_name FROM concept WHERE concept_id in (700299, 700465, 703244, 703547, 704599, 
708298, 712615, 714684, 715259, 715939, 716968, 717607, 720727, 722031, 725131, 733008, 735979, 739138, 743670,
744740, 745790, 750982, 751412, 755695, 756018, 757352, 757688, 766529, 766814, 781039, 785788, 794852, 797617,
800878, 1510813, 1539403, 1545958, 1549686, 1551860, 1592085, 19017241, 40164052, 40165636, 40230761))) 
AND id in (SELECT drug_hoi_relationship FROM drug_hoi_evidence
WHERE statistic_type = 'AERS_PRR' and statistic_value >= 2)) as DH on CA.descendant_concept_id = DH.hoi
GROUP BY concept_name
ORDER BY concept_name
;

SELECT concept_name, count(*)
FROM concept_ancestor as CA 
JOIN (SELECT * FROM concept WHERE vocabulary_id = 'MedDRA' and concept_class_id = 'SOC') as TP on CA.ancestor_concept_id = TP.concept_id
JOIN (SELECT hoi FROM drug_hoi_relationship WHERE drug in (SELECT ingredient_id FROM laertes_summary WHERE report_order = 1 AND
ingredient in (SELECT concept_name FROM concept WHERE concept_id in (SELECT ingredient_concept_id FROM drug_universe))
) AND id in (SELECT drug_hoi_relationship FROM drug_hoi_evidence
WHERE statistic_type = 'AERS_PRR' and statistic_value >= 2)) as DH on CA.descendant_concept_id = DH.hoi
GROUP BY concept_name
ORDER BY concept_name
;

-- Query DrugBank for the ATC class of interacting drugs
SELECT level_code, count(*)
FROM drugbank.drug_atc_code_levels as DATC
JOIN (SELECT secondary_drugbank_id FROM drugbank.drug_drug_interactions WHERE primary_drugbank_id in ())
as DDI on DATC.primary_drugbank_id = DDI.secondary_drugbank_id
WHERE Length(level_code) = 1
GROUP BY level_code
ORDER BY level_code
;

-- Query DrugCentral to get contraindications for the drugs in the DIKB (substitute contraindication)
SELECT concept_name, snomed_conceptid, count(snomed_conceptid)
FROM omop_relationship
WHERE struct_id in ()
and relationship_name = 'indication' and snomed_conceptid is not null
GROUP BY concept_name, snomed_conceptid
ORDER BY count DESC
;

SELECT concept_name, count(*)
FROM concept_ancestor as CA 
JOIN (SELECT * FROM concept WHERE vocabulary_id = 'MedDRA' and concept_class_id = 'SOC') as TP on CA.ancestor_concept_id = TP.concept_id
JOIN (SELECT concept_id FROM concept WHERE concept_code in
('58214004', '370143000', '13644009', '191618007', '267434003', '69322001', '238079002', 
'72092001', '35489007', '21897009', '16506000', '302870006', '371631005', '85248005', 
'191736004', '398796005', '191627008', '25501002', '230690007', '596004', '193462001', 
'238078005', '48694002', '231504006', '190785000', '83746006', '408857007', '59050008', 
'47505003', '16932000', '5158005', '414916001', '68890003', '38341003', '87343002', 
'78004001', '54319003', '314271007', '50697003', '203082005', '384742004', '247803002', 
'72641008', '194828000', '424736006', '234422006', '24199005', '55822004', '386761002', 
'198436008', '194437008', '56294008', '13746004', '60241006')) as C on CA.descendant_concept_id = C.concept_id
GROUP BY concept_name
ORDER BY concept_name
;

('38341003', '61582004', '19824006', '69896004', '406602003', '302809008', 
'40275004', '53084003', '22253000', '70036007', '34020007', '400122007', 
'50563003', '271807003', '195967001', '301011002', '86406008', '312218008', 
'200938002', '53891004', '200965009', '84494001', '58214004', '60867007', 
'48447003', '50697003', '128070006', '90446007', '302809008', '65508009', 
'91857003', '118599009', '88616000', '238608008', '473460002', '118601006', 
'111253001', '20943002', '24079001', '312124009', '82272006', '267802000', 
'44054006', '29864006', '9631008', '15628003', '301012009', '186435004', 
'396275006', '41582007', '9014002', '118618005', '406162001', '3110003', 
'64531003', '13197004', '50417007', '405737000', '68566005', '128350005', 
'68235000', '425748003', '233607000', '416209007', '410795001', '10001005', 
'198436008', '24700007', '22754005', '37796009', '363162000', '75100008', 
'65295003', '84017003', '4210003', '85248005', '72284000', '52254009', 
'33339001', '111196000', '267395000', '65172003', '213148006', '34000006', 
'117891000119100', '36715001', '48440001', '42746002', '47709007', '442481002', 
'48661000', '51530003', '386584007', '399992009', '85828009', '82119001', 
'84849002', '367498001', '32273002', '23685000', '41291007', '267038008', 
'195967001', '2032001', '24079001', '32398004', '51599000', '55464009', 
'67801009', '102447009', '74576004', '64936001', '35489007', '24526004', 
'31541009', '6020002', '34840004', '230418006', '302870006', '417181009', 
'72409005', '8247009', '413603009', '49049000', '125585007', '371405004', 
'107401000119105', '128473001', '363443007', '154283005', '155597006', 
'267434003', '399029005', '68659002', '128945009', '699262001', '238079002', 
'24867002', '49727002', '386761002', '13644009', '76948002', '9323009', 
'71057007', '77971008', '373662000', '308121000', '85670002', '312219000', 
'84757009', '186435004', '78623009', '70076002', '41607009', '88854002', 
'414916001', '129103003', '235595009', '88264003', '75498004', '76272004', 
'428783003', '928000', '312124009', '75498004', '128473001', '254637007', 
'46970008', '48723006', '301183007', '73583000', '370143000', '233598009', 
'56454009', '8229003', '400003000', '230461009', '41381004', '191618007', 
'230690007', '74372003', '25629007', '20607006', '85848002', '70647001', 
'195722003', '162031009', '236084000', '301011002', '38825009', '68272006', 
'82423001', '14760008', '64766004', '397573005', '13200003', '110004001', 
'266143009', '5291005', '415125002', '52441000', '29577008', '45007003', 
'409498004', '236633002', '233609002', '192644005', '55822004', '398909004', 
'352818000', '2576002', '95320005', '237751000', '75498004', '314998002', 
'36971009', '21897009', '87433001', '221360009', '95883001', '11399002', 
'4510004', '238078005', '204878001', '193462001', '16506000', '48694002', 
'448417001', '90176007', '195111005', '40719004', '405769009', '5291005', 
'406506008', '266569009', '32914008', '54200006', '75088002', '72092001', 
'11817007', '50697003', '425464007', '230381009', '4969004', '249515001', 
'247412007', '193031009', '233604007', '111821004', '16331000', '363349007', 
'85769006', '69322001', '700423003', '186946009', '30242009', '4776004', 
'281239006', '254838004', '397825006', '75096007', '68225006', '109989006', 
'75702008', '420079008', '448813005', '399095008', '28867007', '186772009', 
'394659003', '71120004', '398796005', '33659008', '54150009', '2177002', 
'596004', '443482000', '87557004', '3135009', '51868009', '195888009', 
'92814006', '92818009', '186788009', '20639004', '397803000', '315642008',
 '266109000', '44653001', '91514001', '91861009', '386761002', '76067001', 
 '47604008', '432261003', '65074000', '248861000', '49883006', '11977004', 
 '200767005', '12166008', '415070008', '17657000', '394659003', '75116005', 
 '386692008', '708038006', '314557000', '53132006', '447782002', '6142004', 
 '75315001', '414341000', '109298000', '161891005', '25501002', '413847001', 
 '51169003', '5888003', '58265007', '426928008', '194828000', '36188001', 
 '62676009', '231504006', '126485001', '135341000119101', '428015005', '75498004',
  '201101007', '191736004', '21782001', '70153002', '413656006', '61977001', '109969005',
  '402134005', '102447009', '59050008', '420120006', '255056009', '111379007', '312124009',
  '62315008', '190785000', '7200002', '127013003', '16041008', '64859006', '371631005',
  '389145006', '49650001', '113727004', '82091000', '6142004', '73028002', '418363000',
  '70995007', '425688002', '70572005', '4386001', '128187005', '48277006', '230456007',
  '231861005', '266361008', '400047006', '426965005', '363681007', '266599000', '399068003',
  '194828000', '16932000', '4241002', '57643001', '72605008', '233619008', '276674008',
  '206376005', '11218009', '79587009', '703938007', '190634004', '56038003', '386661006',
  '409498004', '426373005', '56038003', '84027009', '397428000', '11218009', '34486009',
  '53277000', '408857007', '66978005', '22298006', '426482000', '109992005', '396228006', '363358000', '37246009', '3716002', '240542006', '30168008', '23502006', '309779001', '19265001', '439993001', '74400008', '109995007', '14140009', '3951002', '26929004', '126906006', '697969008', '151004', '11999007', '1475003', '75498004', '203082005', '64250002', '26039008', '87522002', '37125009', '35742006', '418171008', '56335008', '43153006', '4740000', '58390007', '5441008', '95717004', '384742004', '32798002', '266123003', '22064009', '19155002', '300986008', '75705005', '86981007', '386761002', '363478007', '43141007', '85777005', '79740000', '397428000', '75119003', '186342000', '56391002', '197125005', '12295008', '40930008', '400179000', '13746004', '45007003', '63650001', '426964009', '91637004', '418186002', '87343002', '7632005', '314207007', '4598005', '240557004', '444150000', '118617000', '75544000', '397016004', '36976004', '187022007', '186847001', '52231000', '190794006', '94459006', '65959000', '197171003', '186342000', '47821001', '191627008', '41345002', '190869004', '84619001', '194437008', '170486006', '49436004', '75498004', '39224005', '5158005', '86030004', '363406005', '49436004', '128302006', '289908002', '85649008', '413712001', '237840007', '57676002', '419760006', '443487006', '73452002', '190268003', '43339004', '44743006', '240686008', '410429000', '392291006', '33927004', '33910007', '84980006', '83746006', '11840006', '418279001', '301183007', '186774005', '1685005', '76902006', '310669007', '403914000', '402894005', '4834000', '439993001', '448216007', '449082003', '424736006', '187192000', '400105005', '75498004', '11389007', '416830008', '111798006', '236084000', '34298002', '276828006', '402892009', '72083004', '47505003', '34713006', '232230009', '426128009', '95441000', '8635005', '237662005', '75543006', '127040003', '128350005', '69482004', '46742003', '42343007', '280486004', '37031009', '41381004', '386634006', '268463003', '40701008', '363354003', '417181009', '63440008', '277575008', '186803007', '49607006', '186867005', '29147005', '302231008', '64479007', '77880009', '428061005', '204357006', '423294001', '83330001', '48245008', '75498004', '179101003', '230215006', '410692006', '422400008', '67198005', '58437007', '426549001', '88151007', '423709000', '17732003', '609519004', '699392007', '63480004', '84757009', '441806004', '156072005', '35885006', '90560007', '105997008', '49710005', '71908006', '60241006', '29028009', '139394000', '78048006', '190905008', '434711000124103', '277844007', '254878006', '302849000', '266474003', '194828000', '405501007', '708164002', '31860008', '14972006', '126952004', '254921004', '4847005', '111910009', '205824006', '21846001', '111835002', '7180009', '55353007', '402937004', '417044008', '312218008', '111512005', '254701007', '241749009', '58777003', '60737008', '16814004', '65553006', '443493003', '82403002', '72321008', '75006000', '213299007', '28651003', '421246008', '32527003', '90446007', '23014006', '29227009', '238035000', '72836002', '61048000', '37372002', '187079000', '56018004', '40541001', '370999003', '41565005', '95890006', '53827007', '186903006', '74107003', '60826002', '27836007', '4089001', '200933006', '240637006', '72641008', '52967002', '197171003', '399329002', '403135004', '60549007', '165232002', '83172007', '135341000119101', '56727007', '54137008', '197718007', '58750007', '421666009', '240451000', '8009008', '28438004', '27916005', '91487003', '446096008', '423451008', '38976008', '23130000', '31568009', '65323003', '31681005', '236620008', '216777009', '63042009', '422587007', '698592004', '39579001', '27031003', '18070006', '29943008', '82966003', '65846009', '267064002', '128936008', '7305005', '38822007', '307576001', '398909004', '35868009', '413836008', '109841003', '16269008', '236958009', '233598009', '56989000', '67465009', '87715008', '235833007', '72641008', '74532006', '395022009', '56294008', '401303003', '105629000', '410056006', '400105005', '94360002', '241703000', '45816000', '51615001', '425390006', '42273000', '389026000', '700250006', '313299006', '426087004', '19213003', '79830009', '277905003', '113091000', '314271007', '403059006', '204342004', '409780002', '89155008', '110005000', '3214003', '10692761000119107', '190681003', '88518009', '57938005', '239961006', '314271007', '66751000', '186973005', '432776007', '8260003', '399357009', '14232007', '21983002', '75388006', '21263006', '266093005', '238418005', '13920009', '238033007', '92814006', '233598009', '18081009', '432328008', '186435004', '36209000', '27355003', '61462000', '60380001', '236959001', '417425009', '68158006', '86044005', '267592003', '22455005', '85020001', '266569009', '39111003', '267036007', '236570004', '399326009', '190818004', '88037009', '37471005', '266262004', '410039003', '76651006', '261276004', '422588002', '109385007', '68267002', '63491006', '55735004', '386080007', '190633005', '43894001', '78975002', '238104009', '26039008', '408643008', '192655005', '10743008', '83901003', '396332003', '271425001', '302847003', '9012003', '46635009', '403058003', '7573000', '25668000', '302835009', '42513006', '86299006', '75498004', '237057005', '44088000', '424952003', '56317004', '74895004', '197718007', '66207005', '82236004', '24199005', '425333006', '9713002', '38907003', '40178009', '190855004', '233598009', '441658007', '109994006', '16041008', '363492001', '12876009', '7063008', '417181009', '89627008', '398909004', '235911006', '13645005', '85904008', '31860008', '61462000', '34140002', '44596000', '88213004', '302841002', '398565003', '420585007', '31860008', '282825002', '254632001', '34713006', '191480000', '75498004', '33839006', '4834000', '276799004', '186318004', '20790006', '86555001', '409498004', '254645002', '367542003', '58949002', '397683000', '30285000', '372244006', '118613001', '19829001', '73442001', '74728003', '19972008', '9389005', '68451005', '43763009', '7199000', '49786009', '235419001', '109977009', '402938009', '397428000', '31860008', '47761007', '267369002', '52506002', '162053006', '63246000', '37981002', '287731003', '302162004', '47270006')

-- Query DrugBank for molecular weights
SELECT property_value
FROM drugbank.drug_properties
WHERE primary_drugbank_id in ()
AND kind = 'Molecular Weight'
;

-- Query DrugBank for logP
SELECT property_value
FROM drugbank.drug_properties
WHERE primary_drugbank_id in ()
AND kind = 'logP' and experimental = 't'
ORDER BY primary_drugbank_id
;